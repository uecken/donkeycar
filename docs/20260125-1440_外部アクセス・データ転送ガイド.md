# å¤–éƒ¨ã‚¢ã‚¯ã‚»ã‚¹ãƒ»ãƒ‡ãƒ¼ã‚¿è»¢é€ã‚¬ã‚¤ãƒ‰

**ä½œæˆæ—¥**: 2026å¹´1æœˆ25æ—¥
**æ›´æ–°æ—¥**: 2026å¹´1æœˆ25æ—¥
**ç›®çš„**: Cloudflare Tunnelã‚’ä½¿ã£ãŸå¤–éƒ¨ã‚¢ã‚¯ã‚»ã‚¹ã¨å­¦ç¿’ãƒ‡ãƒ¼ã‚¿è»¢é€æ–¹æ³•

---

## 1. æ¦‚è¦

### æ§‹æˆå›³

```
[å¤–å‡ºå…ˆPC/ã‚¹ãƒãƒ›]
       â”‚
       â”‚ HTTPS (Cloudflare Tunnel)
       â†“
[Cloudflare Edge]
       â”‚
       â”‚ æš—å·åŒ–ãƒˆãƒ³ãƒãƒ«
       â†“
[è‡ªå®…PC (Windows 11)]
       â”‚
       â†“
[WSL2 Ubuntu 22.04]
   â”œâ”€â”€ SSH Server (ãƒ‡ãƒ¼ã‚¿è»¢é€) â€»è¦cloudflared
   â”œâ”€â”€ Jupyter Notebook (ãƒ‡ãƒ¼ã‚¿é–²è¦§ãƒ»å­¦ç¿’) â€»ãƒ–ãƒ©ã‚¦ã‚¶ã®ã¿
   â””â”€â”€ TensorBoard (å­¦ç¿’çµæœå¯è¦–åŒ–) â€»ãƒ–ãƒ©ã‚¦ã‚¶ã®ã¿
```

### åˆ©ç”¨å¯èƒ½ãªæ©Ÿèƒ½

| æ©Ÿèƒ½ | ãƒãƒ¼ãƒˆ | å¤–éƒ¨ã‚¢ã‚¯ã‚»ã‚¹æ–¹æ³• |
|------|--------|-----------------|
| SSH | 22 | cloudflaredå¿…è¦ |
| Jupyter Notebook | 8888 | **ãƒ–ãƒ©ã‚¦ã‚¶ã®ã¿ã§OK** |
| TensorBoard | 6006 | **ãƒ–ãƒ©ã‚¦ã‚¶ã®ã¿ã§OK** |
| Donkey Car UI | - | ãƒ­ãƒ¼ã‚«ãƒ«GUIã®ã¿ |

---

## 2. äº‹å‰æº–å‚™

### WSL2å´ï¼ˆå¿…é ˆï¼‰

```bash
# openssh-server ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
sudo apt-get update && sudo apt-get install -y openssh-server

# cloudflared ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆæ—¢ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿ã®å ´åˆã¯ä¸è¦ï¼‰
curl -L https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-linux-amd64 -o /tmp/cloudflared
chmod +x /tmp/cloudflared
mkdir -p ~/.local/bin
mv /tmp/cloudflared ~/.local/bin/
```

### å¤–å‡ºå…ˆPCï¼ˆSSHæ¥ç¶šã™ã‚‹å ´åˆã®ã¿ï¼‰

**Windows:**
```powershell
winget install Cloudflare.cloudflared
```

**Mac:**
```bash
brew install cloudflared
```

**Linux:**
```bash
curl -L https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-linux-amd64 -o cloudflared
chmod +x cloudflared && sudo mv cloudflared /usr/local/bin/
```

> **æ³¨æ„**: Jupyter/TensorBoardã¯ãƒ–ãƒ©ã‚¦ã‚¶ã®ã¿ã§ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ã€‚cloudflaredã¯ä¸è¦ã€‚

---

## 3. ã‚¹ã‚¯ãƒªãƒ—ãƒˆä¸€è¦§

| ã‚¹ã‚¯ãƒªãƒ—ãƒˆ | ãƒ‘ã‚¹ | ç”¨é€” |
|-----------|------|------|
| start-tunnel.sh | `/home/kenji/scripts/` | Cloudflare Quick Tunnelèµ·å‹• |
| import-data.sh | `/home/kenji/scripts/` | å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã‚¤ãƒ³ãƒãƒ¼ãƒˆ |

### start-tunnel.sh ã‚ªãƒ—ã‚·ãƒ§ãƒ³

| ã‚ªãƒ—ã‚·ãƒ§ãƒ³ | èª¬æ˜ |
|-----------|------|
| `ssh` | SSHãƒˆãƒ³ãƒãƒ«ã®ã¿ |
| `jupyter` | Jupyter Notebookã®ã¿ |
| `tensorboard` | TensorBoardã®ã¿ |
| `ui` | Donkey Car UIï¼ˆãƒ­ãƒ¼ã‚«ãƒ«GUIï¼‰ |
| `all` | **SSH + Jupyter + TensorBoard åŒæ™‚èµ·å‹•ï¼ˆæ¨å¥¨ï¼‰** |

---

## 4. å…¨ã‚µãƒ¼ãƒ“ã‚¹åŒæ™‚èµ·å‹•ï¼ˆæ¨å¥¨ï¼‰

### èµ·å‹•æ–¹æ³•

```bash
/home/kenji/scripts/start-tunnel.sh all
```

### å‡ºåŠ›ä¾‹

```
========================================
å…¨ã‚µãƒ¼ãƒ“ã‚¹ã‚’èµ·å‹•ã—ã¦ã„ã¾ã™...
========================================

1. SSH ã‚µãƒ¼ãƒãƒ¼èµ·å‹•ä¸­...
2. Jupyter Notebook èµ·å‹•ä¸­...
3. TensorBoard èµ·å‹•ä¸­...

========================================
ãƒ­ãƒ¼ã‚«ãƒ«ã‚µãƒ¼ãƒ“ã‚¹çŠ¶æ…‹
========================================
âœ… Jupyter Notebook: http://localhost:8888
âœ… TensorBoard: http://localhost:6006

========================================
å¤–éƒ¨ã‚¢ã‚¯ã‚»ã‚¹URL
========================================

ğŸ“¡ SSH:         https://xxx-xxx.trycloudflare.com
ğŸ““ Jupyter:     https://yyy-yyy.trycloudflare.com
ğŸ“Š TensorBoard: https://zzz-zzz.trycloudflare.com

çµ‚äº†ã™ã‚‹ã«ã¯ Ctrl+C ã‚’æŠ¼ã—ã¦ãã ã•ã„
```

### ã‚¢ã‚¯ã‚»ã‚¹æ–¹æ³•

| ã‚µãƒ¼ãƒ“ã‚¹ | ã‚¢ã‚¯ã‚»ã‚¹æ–¹æ³• |
|---------|-------------|
| **Jupyter** | ãƒ–ãƒ©ã‚¦ã‚¶ã§è¡¨ç¤ºã•ã‚ŒãŸURLã‚’é–‹ãã ã‘ |
| **TensorBoard** | ãƒ–ãƒ©ã‚¦ã‚¶ã§è¡¨ç¤ºã•ã‚ŒãŸURLã‚’é–‹ãã ã‘ |
| **SSH** | ä¸‹è¨˜ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ï¼ˆcloudflaredå¿…è¦ï¼‰ |

---

## 5. SSHæ¥ç¶šæ–¹æ³•ï¼ˆå¤–å‡ºå…ˆã‹ã‚‰ï¼‰

### é‡è¦: URLã®å½¢å¼

âŒ é–“é•ã„: `https://xxx.trycloudflare.com`
âœ… æ­£ã—ã„: `xxx.trycloudflare.com`ï¼ˆhttps://ã‚’é™¤ãï¼‰

### æ¥ç¶šã‚³ãƒãƒ³ãƒ‰

```bash
# ãƒ›ã‚¹ãƒˆåã®ã¿ã‚’ä½¿ç”¨ï¼ˆhttps://ã‚’é™¤ãï¼‰
ssh -o ProxyCommand="cloudflared access ssh --hostname xxx-xxx.trycloudflare.com" kenji@xxx-xxx.trycloudflare.com
```

### SSHè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ~/.ssh/configï¼‰

æ¯å›é•·ã„ã‚³ãƒãƒ³ãƒ‰ã‚’æ‰“ãŸãªãã¦æ¸ˆã‚€ã‚ˆã†ã«è¨­å®šï¼š

```
Host donkey-server
    HostName xxx-xxx.trycloudflare.com
    User kenji
    ProxyCommand cloudflared access ssh --hostname %h
```

è¨­å®šå¾Œã¯ä»¥ä¸‹ã§æ¥ç¶šå¯èƒ½ï¼š
```bash
ssh donkey-server
```

> **æ³¨æ„**: Quick Tunnelã®URLã¯æ¯å›å¤‰ã‚ã‚‹ãŸã‚ã€å›ºå®šURLãŒå¿…è¦ãªå ´åˆã¯ç‹¬è‡ªãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’è¨­å®šã—ã¦ãã ã•ã„ã€‚

---

## 6. Jupyter Notebookã§ã®å­¦ç¿’

### ã‚¢ã‚¯ã‚»ã‚¹

1. `start-tunnel.sh all` ã‚’å®Ÿè¡Œ
2. è¡¨ç¤ºã•ã‚ŒãŸJupyter URLã‚’ãƒ–ãƒ©ã‚¦ã‚¶ã§é–‹ã

### å­¦ç¿’å®Ÿè¡Œï¼ˆJupyterå†…ï¼‰

#### æ–°è¦ãƒãƒ¼ãƒˆãƒ–ãƒƒã‚¯ä½œæˆ
å³ä¸Šã€ŒNewã€â†’ã€ŒPython 3 (ipykernel)ã€

#### ã‚»ãƒ«1: ç’°å¢ƒç¢ºèª
```python
!donkey --version
!nvidia-smi
```

#### ã‚»ãƒ«2: ãƒ‡ãƒ¼ã‚¿ç¢ºèª
```python
!ls -la ~/mycar/data/
```

#### ã‚»ãƒ«3: å­¦ç¿’å®Ÿè¡Œ
```python
!cd ~/mycar && donkey train \
    --tub ./data/murmurpi4_circuit_launch_20210716_1715/data \
    --model ./models/pilot.h5 \
    --type linear
```

#### ã‚»ãƒ«4: ãƒ¢ãƒ‡ãƒ«ç¢ºèª
```python
!ls -la ~/mycar/models/
```

#### ã‚»ãƒ«5: å­¦ç¿’å±¥æ­´ã‚°ãƒ©ãƒ•è¡¨ç¤º
```python
from IPython.display import Image, display
display(Image(filename='/home/kenji/mycar/models/pilot.png'))
```

---

## 7. TensorBoardã§ã®å­¦ç¿’çµæœç¢ºèª

### ã‚¢ã‚¯ã‚»ã‚¹

1. `start-tunnel.sh all` ã‚’å®Ÿè¡Œ
2. è¡¨ç¤ºã•ã‚ŒãŸTensorBoard URLã‚’ãƒ–ãƒ©ã‚¦ã‚¶ã§é–‹ã

### è¡¨ç¤ºå†…å®¹

- æå¤±ï¼ˆLossï¼‰ã‚°ãƒ©ãƒ•
- å­¦ç¿’æ›²ç·š
- ãƒ¢ãƒ‡ãƒ«æ§‹é€ ï¼ˆGraphsï¼‰

---

## 8. å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã®è»¢é€æ–¹æ³•

### 8.1 import-data.sh ã‚¹ã‚¯ãƒªãƒ—ãƒˆä½¿ç”¨ï¼ˆWSL2å†…ã§å®Ÿè¡Œï¼‰

#### Raspberry Piã‹ã‚‰ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
```bash
/home/kenji/scripts/import-data.sh pi@192.168.1.100:~/mycar/data/tub_*
```

#### Windowså´ã‹ã‚‰ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
```bash
/home/kenji/scripts/import-data.sh /mnt/c/Users/thefu/Downloads/tub_data
```

#### ä»»æ„ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‹ã‚‰ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
```bash
/home/kenji/scripts/import-data.sh /path/to/tub_data my_custom_tub_name
```

### 8.2 Jupyter NotebookçµŒç”±ï¼ˆã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ï¼‰

1. Jupyter URLã‚’ãƒ–ãƒ©ã‚¦ã‚¶ã§é–‹ã
2. `data` ãƒ•ã‚©ãƒ«ãƒ€ã«ç§»å‹•
3. ç”»é¢å³ä¸Šã®ã€ŒUploadã€ãƒœã‚¿ãƒ³ã§ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰

> **æ³¨æ„**: å¤§ããªãƒ•ã‚¡ã‚¤ãƒ«ã¯SSHçµŒç”±ï¼ˆrsync/scpï¼‰ã®æ–¹ãŒåŠ¹ç‡çš„

### 8.3 SSHçµŒç”±ï¼ˆrsync/scpï¼‰

#### å¤–å‡ºå…ˆã‹ã‚‰ï¼ˆCloudflare TunnelçµŒç”±ï¼‰

```bash
# rsyncï¼ˆcloudflaredå¿…è¦ï¼‰
rsync -avz -e 'ssh -o ProxyCommand="cloudflared access ssh --hostname xxx.trycloudflare.com"' \
  ./local_tub_data/ kenji@xxx.trycloudflare.com:~/mycar/data/

# scp
scp -o ProxyCommand="cloudflared access ssh --hostname xxx.trycloudflare.com" \
  ./tub_data.tar.gz kenji@xxx.trycloudflare.com:~/mycar/data/
```

---

## 9. ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ä¾‹

### ä¾‹1: å¤–å‡ºå…ˆã‹ã‚‰ãƒªãƒ¢ãƒ¼ãƒˆå­¦ç¿’

```
1. WSL2ã§èµ·å‹•
   $ ./start-tunnel.sh all

2. å¤–å‡ºå…ˆãƒ–ãƒ©ã‚¦ã‚¶ã§Jupyter URLã«ã‚¢ã‚¯ã‚»ã‚¹

3. Jupyterã§å­¦ç¿’å®Ÿè¡Œ
   !donkey train --tub ./data/tub_* --model ./models/pilot.h5

4. åˆ¥ã‚¿ãƒ–ã§TensorBoard URLã‚’é–‹ã„ã¦å­¦ç¿’æ›²ç·šã‚’ç¢ºèª
```

### ä¾‹2: Raspberry Piã§åé›† â†’ è‡ªå®…PCã§å­¦ç¿’

```bash
# 1. ãƒ‡ãƒ¼ã‚¿è»¢é€ï¼ˆWSL2ã§å®Ÿè¡Œï¼‰
/home/kenji/scripts/import-data.sh pi@192.168.1.100:~/mycar/data/tub_*

# 2. å­¦ç¿’
cd ~/mycar
donkey train --tub ./data/tub_* --model ./models/pilot.h5

# 3. ãƒ¢ãƒ‡ãƒ«è»¢é€ï¼ˆRaspberry Piã¸ï¼‰
scp ./models/pilot.tflite pi@192.168.1.100:~/mycar/models/
```

---

## 10. ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

| å•é¡Œ | è§£æ±ºç­– |
|------|--------|
| `ssh.service not found` | `sudo apt install openssh-server` |
| `CreateProcessW failed` | å¤–å‡ºå…ˆPCã«cloudflaredã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ« |
| `Could not resolve hostname https://...` | URLã‹ã‚‰ `https://` ã‚’é™¤ã |
| Jupyter URLã«ã‚¢ã‚¯ã‚»ã‚¹ã§ããªã„ | ã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒå®Ÿè¡Œä¸­ã‹ç¢ºèª |
| TensorBoardãŒç©º | `--logdir` ã«ãƒ¢ãƒ‡ãƒ«ãŒã‚ã‚‹ã‹ç¢ºèª |

---

## 11. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ³¨æ„äº‹é …

| é …ç›® | æ¨å¥¨è¨­å®š |
|------|----------|
| Quick Tunnel URL | æ¯å›å¤‰ã‚ã‚‹ãŸã‚å…±æœ‰ã¯ä¸€æ™‚çš„ã« |
| SSHéµèªè¨¼ | ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰èªè¨¼ã‚ˆã‚Šå®‰å…¨ |
| Jupyter | æœ¬ç•ªã§ã¯èªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³ã‚’è¨­å®š |
| é•·æ™‚é–“å…¬é–‹ | å›ºå®šãƒ‰ãƒ¡ã‚¤ãƒ³ + Cloudflare Accessæ¨å¥¨ |

---

## 12. ãƒ‘ã‚¹æ—©è¦‹è¡¨

| é …ç›® | ãƒ‘ã‚¹ |
|------|------|
| ã‚¹ã‚¯ãƒªãƒ—ãƒˆ | `/home/kenji/scripts/` |
| Donkey Carãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ | `/home/kenji/mycar/` |
| å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ | `/home/kenji/mycar/data/` |
| ãƒ¢ãƒ‡ãƒ«å‡ºåŠ› | `/home/kenji/mycar/models/` |
| Windowsã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹ | `\\wsl$\Ubuntu-22.04\home\kenji\` |

---

## æ›´æ–°å±¥æ­´

| æ—¥ä»˜ | å†…å®¹ |
|------|------|
| 2026å¹´1æœˆ25æ—¥ | åˆç‰ˆä½œæˆ |
| 2026å¹´1æœˆ25æ—¥ | SSH URLå½¢å¼ã®æ³¨æ„äº‹é …è¿½åŠ ã€allã‚ªãƒ—ã‚·ãƒ§ãƒ³è¿½åŠ ã€openssh-serverã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ‰‹é †è¿½åŠ  |
